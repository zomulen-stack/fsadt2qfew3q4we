<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TonWarp - Продвинутый криптокошелек</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <script src="https://unpkg.com/ton-crypto@0.0.32/dist/ton-crypto.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        :root {
            --primary: #3b82f6;
            --primary-hover: #2563eb;
            --primary-dark: #1e40af;
            --gradient: linear-gradient(135deg, var(--primary), #60a5fa);
            --gradient-hover: linear-gradient(135deg, var(--primary-hover), #3b82f6);
            --light-bg: #f8fafc;
            --light-card: #ffffff;
            --dark-bg: #0f172a;
            --dark-card: #1e293b;
            --darker-card: #1a2537;
            --text: #334155;
            --light-text: #f1f5f9;
            --border: #e2e8f0;
            --dark-border: #334155;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            --shadow-lg: 0 10px 25px -5px rgba(0, 0, 0, 0.1);
            --radius: 16px;
            --radius-sm: 12px;
            --radius-lg: 24px;
        }
        
        body {
            background: var(--light-bg);
            color: var(--text);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
            line-height: 1.5;
        }
        
        body.dark-mode {
            background: linear-gradient(135deg, #0b1120, #0f172a);
            color: var(--light-text);
        }
        
        .container {
            max-width: 100%;
            margin: 0 auto;
            padding: 0;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        .screen {
            display: none;
            flex-direction: column;
            flex: 1;
            padding: 0;
            min-height: 100vh;
        }
        
        .screen.active {
            display: flex;
            animation: fadeIn 0.4s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
            100% { transform: translateY(0px); }
        }
        
        /* Auth Screen */
        .auth-container {
            max-width: 420px;
            margin: 0 auto;
            padding: 20px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            min-height: 100vh;
        }
        
        .auth-header {
            text-align: center;
            margin-bottom: 40px;
            animation: fadeIn 0.6s ease;
        }
        
        .logo-icon {
            font-size: 72px;
            margin-bottom: 20px;
            background: var(--gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: float 4s ease-in-out infinite;
        }
        
        .auth-header h1 {
            font-size: 32px;
            font-weight: 800;
            margin-bottom: 8px;
            background: var(--gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            letter-spacing: -0.5px;
        }
        
        .auth-header p {
            color: var(--text);
            font-size: 16px;
            opacity: 0.8;
        }
        
        body.dark-mode .auth-header p {
            color: var(--light-text);
            opacity: 0.7;
        }
        
        .auth-card {
            background: var(--light-card);
            border-radius: var(--radius-lg);
            padding: 32px;
            box-shadow: var(--shadow-lg);
            margin-bottom: 20px;
        }
        
        body.dark-mode .auth-card {
            background: var(--dark-card);
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.25);
            border: 1px solid rgba(255, 255, 255, 0.05);
        }
        
        .auth-actions {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }
        
        .btn {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 100%;
            padding: 18px 24px;
            border-radius: var(--radius);
            background: var(--gradient);
            color: white;
            font-size: 17px;
            font-weight: 600;
            border: none;
            cursor: pointer;
            text-align: center;
            text-decoration: none;
            transition: all 0.3s ease;
            box-shadow: var(--shadow);
            position: relative;
            overflow: hidden;
        }
        
        .btn:hover {
            background: var(--gradient-hover);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(59, 130, 246, 0.3);
        }
        
        .btn:active {
            transform: translateY(0);
        }
        
        .btn i {
            margin-right: 10px;
            font-size: 20px;
        }
        
        .btn-outline {
            background: transparent;
            border: 2px solid var(--primary);
            color: var(--primary);
            box-shadow: none;
        }
        
        .btn-outline:hover {
            background: rgba(59, 130, 246, 0.1);
            color: var(--primary-hover);
            border-color: var(--primary-hover);
            transform: translateY(-2px);
        }
        
        .btn::after {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(
                to bottom right,
                rgba(255, 255, 255, 0.3),
                rgba(255, 255, 255, 0)
            );
            transform: translate(-30%, -30%) rotate(30deg);
            opacity: 0;
            transition: all 0.5s ease;
        }
        
        .btn:hover::after {
            opacity: 1;
            transform: translate(30%, 30%) rotate(30deg);
        }
        
        .auth-footer {
            text-align: center;
            color: var(--text);
            font-size: 14px;
            opacity: 0.7;
        }
        
        body.dark-mode .auth-footer {
            color: var(--light-text);
        }
        
        /* Screen Headers */
        .screen-header {
            text-align: center;
            padding: 30px 20px 20px;
            margin-bottom: 10px;
            position: relative;
        }
        
        .screen-header::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 4px;
            background: var(--primary);
            border-radius: 2px;
        }
        
        .screen-header h1 {
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 8px;
            color: var(--text);
        }
        
        body.dark-mode .screen-header h1 {
            color: var(--light-text);
        }
        
        .screen-header p {
            color: #64748b;
            font-size: 16px;
            max-width: 500px;
            margin: 0 auto;
        }
        
        body.dark-mode .screen-header p {
            color: #94a3b8;
        }
        
        /* Card */
        .card {
            background: var(--light-card);
            border-radius: 0;
            padding: 20px;
            margin: 0;
            flex: 1;
        }
        
        body.dark-mode .card {
            background: var(--darker-card);
            border-color: var(--dark-border);
        }
        
        /* Seed Phrase Screen */
        .warning-box {
            background: rgba(245, 158, 11, 0.1);
            border-radius: var(--radius);
            padding: 22px;
            margin: 20px 0;
            border-left: 4px solid var(--warning);
        }
        
        .warning-box h3 {
            display: flex;
            align-items: center;
            margin-bottom: 12px;
            color: var(--warning);
            font-size: 18px;
        }
        
        .warning-box h3 i {
            margin-right: 12px;
            font-size: 22px;
        }
        
        .warning-box p {
            color: var(--text);
            line-height: 1.6;
            font-size: 16px;
        }
        
        body.dark-mode .warning-box p {
            color: var(--light-text);
            opacity: 0.8;
        }
        
        .seed-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            margin: 25px 0;
        }
        
        .seed-word {
            background: var(--light-card);
            border-radius: var(--radius-sm);
            padding: 14px;
            text-align: center;
            font-weight: 600;
            box-shadow: var(--shadow);
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            border: 1px solid var(--border);
        }
        
        body.dark-mode .seed-word {
            background: rgba(30, 41, 59, 0.7);
            border-color: rgba(255, 255, 255, 0.05);
        }
        
        .seed-number {
            color: #777;
            margin-right: 8px;
            font-size: 15px;
            font-weight: 500;
        }
        
        body.dark-mode .seed-number {
            color: #aaa;
        }
        
        /* Verify Seed Screen */
        .word-check-container {
            margin: 25px 0;
        }
        
        .word-check-item {
            margin-bottom: 20px;
        }
        
        .word-check-label {
            font-weight: 600;
            margin-bottom: 10px;
            display: block;
            color: var(--text);
        }
        
        body.dark-mode .word-check-label {
            color: var(--light-text);
            opacity: 0.8;
        }
        
        .word-check-input {
            width: 100%;
            padding: 16px 20px;
            border: 2px solid var(--border);
            border-radius: var(--radius);
            font-size: 17px;
            text-align: center;
            background: var(--light-card);
        }
        
        body.dark-mode .word-check-input {
            background: rgba(30, 41, 59, 0.5);
            color: white;
            border-color: rgba(255, 255, 255, 0.1);
        }
        
        /* Password Screen */
        .input-group {
            margin-bottom: 24px;
        }
        
        .input-group label {
            display: block;
            margin-bottom: 10px;
            font-weight: 600;
            font-size: 16px;
            color: var(--text);
        }
        
        body.dark-mode .input-group label {
            color: var(--light-text);
        }
        
        .input-group input {
            width: 100%;
            padding: 16px 20px;
            border: 2px solid var(--border);
            border-radius: var(--radius);
            font-size: 17px;
            transition: all 0.3s ease;
            background: var(--light-card);
        }
        
        body.dark-mode .input-group input {
            background: rgba(30, 41, 59, 0.5);
            color: white;
            border-color: rgba(255, 255, 255, 0.1);
        }
        
        .input-group input:focus {
            border-color: var(--primary);
            outline: none;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.2);
        }
        
        .password-strength {
            height: 6px;
            background: #eee;
            border-radius: 3px;
            margin-top: 8px;
            overflow: hidden;
        }
        
        body.dark-mode .password-strength {
            background: #333;
        }
        
        .strength-meter {
            height: 100%;
            background: var(--gradient);
            width: 0%;
            transition: width 0.3s ease;
        }
        
        .password-rules {
            margin-top: 20px;
            padding: 15px;
            background: rgba(59, 130, 246, 0.05);
            border-radius: var(--radius);
        }
        
        body.dark-mode .password-rules {
            background: rgba(59, 130, 246, 0.1);
        }
        
        .password-rules ul {
            padding-left: 20px;
            margin-top: 10px;
        }
        
        .password-rules li {
            margin-bottom: 8px;
            font-size: 14px;
            color: var(--text);
        }
        
        body.dark-mode .password-rules li {
            color: var(--light-text);
            opacity: 0.7;
        }
        
        /* Restore Screen */
        .restore-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            margin: 25px 0;
        }
        
        .restore-input {
            display: flex;
            align-items: center;
        }
        
        .restore-input label {
            margin-right: 8px;
            font-weight: 600;
            color: var(--text);
        }
        
        body.dark-mode .restore-input label {
            color: var(--light-text);
            opacity: 0.7;
        }
        
        .restore-input input {
            flex: 1;
            padding: 14px;
            border: 2px solid var(--border);
            border-radius: var(--radius-sm);
            font-size: 16px;
            text-align: center;
            font-weight: 600;
            background: var(--light-card);
        }
        
        body.dark-mode .restore-input input {
            background: rgba(30, 41, 59, 0.5);
            color: white;
            border-color: rgba(255, 255, 255, 0.1);
        }
        
        /* Main Wallet Screen */
        .wallet-header {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 25px;
            padding: 20px 20px 0;
        }
        
        .wallet-balance {
            font-size: 42px;
            font-weight: 800;
            margin: 8px 0;
            background: var(--gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-align: center;
        }
        
        .wallet-address {
            background: rgba(59, 130, 246, 0.1);
            color: var(--primary);
            padding: 10px 22px;
            border-radius: 24px;
            font-size: 16px;
            font-weight: 600;
            display: flex;
            align-items: center;
            margin-top: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            max-width: 100%;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        body.dark-mode .wallet-address {
            background: rgba(59, 130, 246, 0.2);
        }
        
        .action-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 18px;
            margin: 15px 0 30px;
            padding: 0 20px;
        }
        
        .action-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .action-icon {
            width: 60px;
            height: 60px;
            background: rgba(59, 130, 246, 0.1);
            border-radius: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 12px;
            transition: all 0.3s ease;
        }
        
        .action-icon i {
            color: var(--primary);
            font-size: 26px;
        }
        
        .action-label {
            font-size: 14px;
            font-weight: 600;
            text-align: center;
        }
        
        .asset-list {
            margin-top: 20px;
            padding: 0 20px;
        }
        
        .asset-item {
            display: flex;
            align-items: center;
            padding: 18px 0;
            border-bottom: 1px solid var(--border);
            transition: all 0.3s ease;
        }
        
        body.dark-mode .asset-item {
            border-bottom-color: var(--dark-border);
        }
        
        .asset-icon {
            width: 52px;
            height: 52px;
            background: var(--gradient);
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 18px;
        }
        
        .asset-icon .ton-symbol {
            color: white;
            font-size: 22px;
            font-weight: bold;
        }
        
        .asset-details {
            flex: 1;
        }
        
        .asset-name {
            font-weight: 700;
            font-size: 18px;
            margin-bottom: 6px;
        }
        
        .asset-balance {
            font-size: 16px;
            color: #666;
        }
        
        body.dark-mode .asset-balance {
            color: #aaa;
        }
        
        .asset-price {
            text-align: right;
        }
        
        .asset-value {
            font-weight: 700;
            font-size: 18px;
            margin-bottom: 6px;
        }
        
        .asset-change {
            font-size: 15px;
            color: var(--success);
        }
        
        /* Transactions */
        .transaction-list {
            margin-top: 20px;
            padding: 0 20px;
        }
        
        .transaction-item {
            display: flex;
            align-items: center;
            padding: 18px 0;
            border-bottom: 1px solid var(--border);
            transition: all 0.3s ease;
        }
        
        body.dark-mode .transaction-item {
            border-bottom-color: var(--dark-border);
        }
        
        .transaction-icon {
            width: 44px;
            height: 44px;
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 18px;
            background: rgba(59, 130, 246, 0.1);
        }
        
        .transaction-icon i {
            color: var(--primary);
            font-size: 20px;
        }
        
        .transaction-details {
            flex: 1;
            min-width: 0;
        }
        
        .transaction-title {
            font-weight: 600;
            margin-bottom: 6px;
            font-size: 17px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .transaction-address {
            font-size: 14px;
            color: #777;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        body.dark-mode .transaction-address {
            color: #aaa;
        }
        
        .transaction-amount {
            font-weight: 700;
            font-size: 18px;
            white-space: nowrap;
        }
        
        .receive {
            color: var(--success);
        }
        
        .send {
            color: var(--danger);
        }
        
        .no-transactions {
            text-align: center;
            padding: 40px 20px;
            color: #777;
        }
        
        body.dark-mode .no-transactions {
            color: #aaa;
        }
        
        .ton-icon {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 24px;
            height: 24px;
            background: var(--primary);
            color: white;
            border-radius: 50%;
            font-weight: bold;
            margin-right: 5px;
        }
        
        /* Settings Screen */
        .settings-item {
            display: flex;
            align-items: center;
            padding: 20px 0;
            border-bottom: 1px solid var(--border);
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        body.dark-mode .settings-item {
            border-bottom-color: var(--dark-border);
        }
        
        .settings-icon {
            width: 44px;
            height: 44px;
            background: rgba(59, 130, 246, 0.1);
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 18px;
        }
        
        .settings-icon i {
            color: var(--primary);
            font-size: 20px;
        }
        
        .settings-text {
            flex: 1;
        }
        
        .settings-text h3 {
            font-size: 18px;
            margin-bottom: 6px;
            font-weight: 600;
        }
        
        .settings-text p {
            font-size: 15px;
            color: #777;
        }
        
        body.dark-mode .settings-text p {
            color: #aaa;
        }
        
        .security-badge {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-top: 25px;
            padding: 12px;
            background: rgba(16, 185, 129, 0.1);
            border-radius: 14px;
            color: var(--success);
            font-weight: 600;
        }
        
        .theme-select {
            padding: 8px 15px;
            border-radius: 12px;
            border: 2px solid var(--border);
            background: white;
            font-size: 16px;
            margin-left: 10px;
        }
        
        body.dark-mode .theme-select {
            background: #2a2a3c;
            color: white;
            border-color: #444;
        }
        
        /* Navigation */
        .nav-bar {
            display: flex;
            justify-content: space-around;
            padding: 18px 10px;
            position: sticky;
            bottom: 0;
            z-index: 10;
            backdrop-filter: blur(10px);
            background: rgba(255, 255, 255, 0.85);
            border-top: 1px solid var(--border);
            display: none;
        }
        
        body.dark-mode .nav-bar {
            background: rgba(15, 23, 42, 0.9);
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer;
            padding: 8px 20px;
            border-radius: 16px;
            transition: all 0.3s ease;
        }
        
        .nav-item.active {
            background: rgba(59, 130, 246, 0.15);
        }
        
        .nav-item i {
            font-size: 22px;
            margin-bottom: 6px;
            color: #777;
            transition: all 0.3s ease;
        }
        
        .nav-item.active i {
            color: var(--primary);
        }
        
        .nav-label {
            font-size: 13px;
            font-weight: 600;
        }
        
        /* Modals */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(5px);
        }
        
        .modal-content {
            background: var(--light-card);
            border-radius: 28px;
            width: 90%;
            max-width: 420px;
            padding: 35px;
            animation: modalIn 0.4s ease;
            position: relative;
            overflow: hidden;
        }
        
        body.dark-mode .modal-content {
            background: var(--dark-card);
        }
        
        .modal-content::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 6px;
            background: var(--gradient);
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }
        
        .modal-title {
            font-size: 24px;
            font-weight: 700;
            color: var(--text);
        }
        
        body.dark-mode .modal-title {
            color: var(--light-text);
        }
        
        .modal-close {
            background: none;
            border: none;
            font-size: 28px;
            cursor: pointer;
            color: #777;
            transition: all 0.3s ease;
        }
        
        body.dark-mode .modal-close {
            color: #aaa;
        }
        
        .qr-code {
            width: 220px;
            height: 220px;
            margin: 25px auto;
            background: #f0f0f0;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 16px;
            position: relative;
            overflow: hidden;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
        }
        
        .address-display {
            background: #f8f9fa;
            border-radius: 16px;
            padding: 18px;
            margin: 25px 0;
            text-align: center;
            font-family: monospace;
            word-break: break-all;
            font-size: 16px;
            border: 1px dashed var(--border);
            font-weight: 500;
        }
        
        body.dark-mode .address-display {
            background: #2a2a3c;
            border-color: #444;
        }
        
        .copy-btn {
            background: var(--gradient);
            color: white;
            border: none;
            padding: 14px 28px;
            border-radius: 16px;
            cursor: pointer;
            font-weight: 600;
            display: flex;
            align-items: center;
            margin: 15px auto 0;
            font-size: 16px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 136, 204, 0.3);
        }
        
        @keyframes modalIn {
            from { opacity: 0; transform: translateY(-30px) scale(0.95); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }
        
        .loading {
            text-align: center;
            padding: 40px;
        }
        
        .loading-spinner {
            border: 4px solid rgba(0, 0, 0, 0.1);
            border-radius: 50%;
            border-top: 4px solid var(--primary);
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="dark-mode">
    <div class="container">
        <!-- Авторизация -->
        <div class="screen active" id="authScreen">
            <div class="auth-container">
                <div class="auth-header">
                    <i class="fas fa-wallet logo-icon"></i>
                    <h1>TonWarp</h1>
                    <p>Ваш безопасный портал в мир криптовалют</p>
                </div>
                
                <div class="auth-card">
                    <div class="auth-actions">
                        <button class="btn" id="createWalletBtn">
                            <i class="fas fa-plus-circle"></i> Создать кошелек
                        </button>
                        
                        <button class="btn btn-outline" id="restoreWalletBtn">
                            <i class="fas fa-redo"></i> Восстановить доступ
                        </button>
                    </div>
                </div>
                
                <div class="auth-footer">
                    <p>TonWarp &copy; 2023 | Безопасность прежде всего</p>
                </div>
            </div>
        </div>
        
        <!-- Создание кошелька: Сид-фраза -->
        <div class="screen" id="seedPhraseScreen">
            <div class="screen-header">
                <h1>Ваша сид-фраза</h1>
                <p>Это ключ к вашему кошельку. Сохраните его в безопасном месте</p>
            </div>
            
            <div class="card">
                <div class="warning-box">
                    <h3><i class="fas fa-exclamation-triangle"></i> Важно!</h3>
                    <p>Запишите эти слова на бумаге в правильном порядке. Это единственный способ восстановить ваш кошелек в случае потери устройства.</p>
                </div>
                
                <div class="seed-grid" id="seedGrid"></div>
                
                <button class="btn" id="continueToVerifyBtn">Я записал</button>
            </div>
        </div>
        
        <!-- Проверка сид-фразы -->
        <div class="screen" id="verifySeedScreen">
            <div class="screen-header">
                <h1>Проверка сид-фразы</h1>
                <p>Убедитесь, что вы правильно записали сид-фразу</p>
            </div>
            
            <div class="card">
                <p>Пожалуйста, введите следующие слова из вашей сид-фразы, чтобы убедиться, что вы записали её правильно:</p>
                
                <div class="word-check-container">
                    <div class="word-check-item">
                        <div class="word-check-label">Слово #7</div>
                        <input type="text" class="word-check-input" id="word7" placeholder="Введите слово">
                    </div>
                    
                    <div class="word-check-item">
                        <div class="word-check-label">Слово #14</div>
                        <input type="text" class="word-check-input" id="word14" placeholder="Введите слово">
                    </div>
                    
                    <div class="word-check-item">
                        <div class="word-check-label">Слово #19</div>
                        <input type="text" class="word-check-input" id="word19" placeholder="Введите слово">
                    </div>
                </div>
                
                <button class="btn" id="verifySeedBtn">Проверить</button>
            </div>
        </div>
        
        <!-- Создание пароля -->
        <div class="screen" id="passwordScreen">
            <div class="screen-header">
                <h1>Защита кошелька</h1>
                <p>Создайте надежный пароль для дополнительной безопасности</p>
            </div>
            
            <div class="card">
                <div class="input-group">
                    <label for="walletPassword">Пароль</label>
                    <input type="password" id="walletPassword" placeholder="Придумайте надежный пароль">
                    <div class="password-strength">
                        <div class="strength-meter" id="strengthMeter"></div>
                    </div>
                </div>
                
                <div class="input-group">
                    <label for="confirmWalletPassword">Подтвердите пароль</label>
                    <input type="password" id="confirmWalletPassword" placeholder="Повторите пароль">
                </div>
                
                <div class="password-rules">
                    <p><strong>Требования к паролю:</strong></p>
                    <ul>
                        <li>Не менее 8 символов</li>
                        <li>Содержит буквы и цифры</li>
                        <li>Не используйте простые пароли</li>
                    </ul>
                </div>
                
                <button class="btn" id="createPasswordBtn">Создать кошелек</button>
            </div>
        </div>
        
        <!-- Восстановление кошелька -->
        <div class="screen" id="restoreScreen">
            <div class="screen-header">
                <h1>Восстановление кошелька</h1>
                <p>Введите сид-фразу для восстановления доступа</p>
            </div>
            
            <div class="card">
                <p>Введите 24 слова вашей сид-фразы в правильном порядке:</p>
                
                <div class="restore-grid" id="restoreGrid"></div>
                
                <button class="btn" id="continueRestoreBtn">Продолжить</button>
            </div>
        </div>
        
        <!-- Главный экран кошелька -->
        <div class="screen" id="mainScreen">
            <div class="wallet-header">
                <div class="wallet-balance" id="walletBalance">$0.00</div>
                <div class="wallet-address" id="walletAddress" onclick="showAddressModal()">
                    EQCD...Z8e <i class="fas fa-copy"></i>
                </div>
            </div>
            
            <div class="action-grid">
                <div class="action-item" onclick="showModal('buyModal')">
                    <div class="action-icon">
                        <i class="fas fa-shopping-cart"></i>
                    </div>
                    <div class="action-label">Купить</div>
                </div>
                <div class="action-item" onclick="showModal('sendModal')">
                    <div class="action-icon">
                        <i class="fas fa-paper-plane"></i>
                    </div>
                    <div class="action-label">Отправить</div>
                </div>
                <div class="action-item" onclick="showModal('receiveModal')">
                    <div class="action-icon">
                        <i class="fas fa-qrcode"></i>
                    </div>
                    <div class="action-label">Получить</div>
                </div>
                <div class="action-item" onclick="showScreen('settingsScreen')">
                    <div class="action-icon">
                        <i class="fas fa-cog"></i>
                    </div>
                    <div class="action-label">Настройки</div>
                </div>
            </div>
            
            <div class="asset-list">
                <div class="asset-item">
                    <div class="asset-icon">
                        <div class="ton-symbol">T</div>
                    </div>
                    <div class="asset-details">
                        <div class="asset-name">Toncoin (TON)</div>
                        <div class="asset-balance" id="tonBalance">0 TON</div>
                    </div>
                    <div class="asset-price">
                        <div class="asset-value" id="tonValue">$0.00</div>
                        <div class="asset-change" id="tonChange">$0.00 +0.00%</div>
                    </div>
                </div>
            </div>
            
            <div class="transaction-list" id="transactionList">
                <div class="no-transactions">
                    <p><i class="fas fa-wallet" style="font-size: 24px; margin-bottom: 10px;"></i></p>
                    <p>Ваша история транзакций будет отображаться здесь</p>
                    <p>Совершите свою первую транзакцию!</p>
                </div>
            </div>
        </div>
        
        <!-- Настройки -->
        <div class="screen" id="settingsScreen">
            <div class="screen-header">
                <h1>Настройки</h1>
                <p>Управление безопасностью и параметрами кошелька</p>
            </div>
            
            <div class="card">
                <div class="security-badge">
                    <i class="fas fa-shield-alt"></i> Ваш кошелек защищен
                </div>
                
                <div class="settings-item" onclick="showModal('securityModal')">
                    <div class="settings-icon">
                        <i class="fas fa-lock"></i>
                    </div>
                    <div class="settings-text">
                        <h3>Безопасность</h3>
                        <p>Показать сид-фразу, сменить пароль</p>
                    </div>
                </div>
                
                <div class="settings-item">
                    <div class="settings-icon">
                        <i class="fas fa-globe"></i>
                    </div>
                    <div class="settings-text">
                        <h3>Сеть</h3>
                        <p>Основная сеть</p>
                    </div>
                </div>
                
                <div class="settings-item" onclick="window.open('https://t.me/tonwarpsupport', '_blank')">
                    <div class="settings-icon">
                        <i class="fas fa-headset"></i>
                    </div>
                    <div class="settings-text">
                        <h3>Поддержка</h3>
                        <p>Написать в службу поддержки</p>
                    </div>
                </div>
                
                <div class="settings-item" onclick="window.open('https://t.me/tonwarpnews', '_blank')">
                    <div class="settings-icon">
                        <i class="fas fa-newspaper"></i>
                    </div>
                    <div class="settings-text">
                        <h3>Новости</h3>
                        <p>Последние обновления кошелька</p>
                    </div>
                </div>
                
                <div class="settings-item">
                    <div class="settings-icon">
                        <i class="fas fa-palette"></i>
                    </div>
                    <div class="settings-text">
                        <h3>Тема оформления</h3>
                        <p>Светлая / Темная</p>
                    </div>
                    <select id="themeSelect" class="theme-select">
                        <option value="light">Светлая</option>
                        <option value="dark" selected>Темная</option>
                    </select>
                </div>
                
                <div class="settings-item" onclick="logout()">
                    <div class="settings-icon">
                        <i class="fas fa-sign-out-alt"></i>
                    </div>
                    <div class="settings-text">
                        <h3>Выйти</h3>
                        <p>Завершить сеанс</p>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Навигационная панель -->
        <div class="nav-bar" id="navBar">
            <div class="nav-item active" onclick="showScreen('mainScreen')">
                <i class="fas fa-wallet"></i>
                <div class="nav-label">Кошелек</div>
            </div>
            <div class="nav-item" onclick="showScreen('settingsScreen')">
                <i class="fas fa-cog"></i>
                <div class="nav-label">Настройки</div>
            </div>
        </div>
    </div>
    
    <!-- Модальные окна -->
    <div class="modal" id="receiveModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">Получить TON</div>
                <button class="modal-close" onclick="closeModal()">&times;</button>
            </div>
            
            <div class="qr-code"></div>
            
            <div class="address-display" id="fullAddress">EQCD39VS5jcptHL8vMjEXrzGaRcCVYto7HUn4bpAOg8xqB2N</div>
            
            <button class="copy-btn" onclick="copyAddress()">
                <i class="fas fa-copy"></i> Скопировать адрес
            </button>
        </div>
    </div>
    
    <div class="modal" id="sendModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">Отправить TON</div>
                <button class="modal-close" onclick="closeModal()">&times;</button>
            </div>
            
            <div class="input-group">
                <label for="recipient">Адрес получателя</label>
                <input type="text" id="recipient" placeholder="Введите TON адрес">
            </div>
            
            <div class="input-group">
                <label for="amount">Сумма (TON)</label>
                <input type="number" id="amount" placeholder="0.0" step="0.01">
            </div>
            
            <button class="btn" onclick="sendTransaction()">Отправить</button>
        </div>
    </div>
    
    <div class="modal" id="securityModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">Безопасность</div>
                <button class="modal-close" onclick="closeModal()">&times;</button>
            </div>
            
            <div class="warning-box">
                <h3><i class="fas fa-exclamation-triangle"></i> Внимание!</h3>
                <p>Никому не сообщайте вашу сид-фразу. Любой, у кого есть доступ к ней, получит полный контроль над вашими средствами.</p>
            </div>
            
            <button class="btn" onclick="showSeedPhrase()">
                <i class="fas fa-key"></i> Показать сид-фразу
            </button>
            
            <div class="input-group" style="margin-top: 25px;">
                <label for="newPassword">Новый пароль</label>
                <input type="password" id="newPassword" placeholder="Введите новый пароль">
            </div>
            
            <div class="input-group">
                <label for="confirmNewPassword">Подтвердите пароль</label>
                <input type="password" id="confirmNewPassword" placeholder="Повторите пароль">
            </div>
            
            <button class="btn" style="margin-top: 15px;">Изменить пароль</button>
        </div>
    </div>

    <script>
        // Конфигурация API Toncenter
        const TONCENTER_API_KEY = 'YOUR_API_KEY'; // Замените на реальный ключ с toncenter.com
        const TONCENTER_URL = 'https://toncenter.com/api/v2';
        const TESTNET = false; // Использовать тестовую сеть (true) или основную (false)
        
        // Генератор случайных слов для сид-фразы
        const bip39Words = [
            "abandon", "ability", "able", "about", "above", "absent", 
            "absorb", "abstract", "absurd", "abuse", "access", "accident", 
            "account", "accuse", "achieve", "acid", "acoustic", "acquire", 
            "across", "act", "action", "actor", "actress", "actual", 
            "adapt", "add", "addict", "address", "adjust", "admit", 
            "adult", "advance", "advice", "aerobic", "affair", "afford", 
            "afraid", "again", "age", "agent", "agree", "ahead", 
            "aim", "air", "airport", "aisle", "alarm", "album", 
            "alcohol", "alert", "alien", "all", "alley", "allow", 
            "almost", "alone", "alpha", "already", "also", "alter", 
            "always", "amateur", "amazing", "among", "amount", "amused", 
            "analyst", "anchor", "ancient", "anger", "angle", "angry", 
            "animal", "ankle", "announce", "annual", "another", "answer", 
            "antenna", "antique", "anxiety", "any", "apart", "apology", 
            "appear", "apple", "approve", "april", "arch", "arctic", 
            "area", "arena", "argue", "arm", "armed", "armor", 
            "army", "around", "arrange", "arrest", "arrive", "arrow", 
            "art", "artefact", "artist", "artwork", "ask", "aspect", 
            "assault", "asset", "assist", "assume", "asthma", "athlete", 
            "atom", "attack", "attend", "attitude", "attract", "auction", 
            "audit", "august", "aunt", "author", "auto", "autumn", 
            "average", "avocado", "avoid", "awake", "aware", "away", 
            "awesome", "awful", "awkward", "axis", "baby", "bachelor", 
            "bacon", "badge", "bag", "balance", "balcony", "ball", 
            "bamboo", "banana", "banner", "bar", "barely", "bargain", 
            "barrel", "base", "basic", "basket", "battle", "beach", 
            "bean", "beauty", "because", "become", "beef", "before", 
            "begin", "behave", "behind", "believe", "below", "belt", 
            "bench", "benefit", "best", "betray", "better", "between", 
            "beyond", "bicycle", "bid", "bike", "bind", "biology", 
            "bird", "birth", "bitter", "black", "blade", "blame", 
            "blanket", "blast", "bleak", "bless", "blind", "blood", 
            "blossom", "blouse", "blue", "blur", "blush", "board", 
            "boat", "body", "boil", "bomb", "bone", "bonus", 
            "book", "boost", "border", "boring", "borrow", "boss", 
            "bottom", "bounce", "box", "boy", "bracket", "brain", 
            "brand", "brass", "brave", "bread", "breeze", "brick", 
            "bridge", "brief", "bright", "bring", "brisk", "broccoli", 
            "broken", "bronze", "broom", "brother", "brown", "brush", 
            "bubble", "buddy", "budget", "buffalo", "build", "bulb", 
            "bulk", "bullet", "bundle", "bunker", "burden", "burger", 
            "burst", "bus", "business", "busy", "butter", "buyer", 
            "buzz", "cabbage", "cabin", "cable", "cactus", "cage", 
            "cake", "call", "calm", "camera", "camp", "can", 
            "canal", "cancel", "candy", "cannon", "canoe", "canvas", 
            "canyon", "capable", "capital", "captain", "car", "carbon", 
            "card", "cargo", "carpet", "carry", "cart", "case", 
            "cash", "casino", "castle", "casual", "cat", "catalog", 
            "catch", "category", "cattle", "caught", "cause", "caution", 
            "cave", "ceiling", "celery", "cement", "census", "century", 
            "cereal", "certain", "chair", "chalk", "champion", "change", 
            "chaos", "chapter", "charge", "chase", "chat", "cheap", 
            "check", "cheese", "chef", "cherry", "chest", "chicken", 
            "chief", "child", "chimney", "choice", "choose", "chronic", 
            "chuckle", "chunk", "churn", "cigar", "cinnamon", "circle", 
            "citizen", "city", "civil", "claim", "clap", "clarify", 
            "claw", "clay", "clean", "clerk", "clever", "click", 
            "client", "cliff", "climb", "clinic", "clip", "clock", 
            "clog", "close", "cloth", "cloud", "clown", "club", 
            "clump", "cluster", "clutch", "coach", "coast", "coconut", 
            "code", "coffee", "coil", "coin", "collect", "color", 
            "column", "combine", "come", "comfort", "comic", "common", 
            "company", "concert", "conduct", "confirm", "congress", "connect", 
            "consider", "control", "convince", "cook", "cool", "copper", 
            "copy", "coral", "core", "corn", "correct", "cost", 
            "cotton", "couch", "country", "couple", "course", "cousin", 
            "cover", "coyote", "crack", "cradle", "craft", "cram", 
            "crane", "crash", "crater", "crawl", "crazy", "cream", 
            "credit", "creek", "crew", "cricket", "crime", "crisp", 
            "critic", "crop", "cross", "crouch", "crowd", "crucial", 
            "cruel", "cruise", "crumble", "crunch", "crush", "cry", 
            "crystal", "cube", "culture", "cup", "cupboard", "curious", 
            "current", "curtain", "curve", "cushion", "custom", "cute", 
            "cycle", "dad", "damage", "damp", "dance", "danger", 
            "daring", "dash", "daughter", "dawn", "day", "deal", 
            "debate", "debris", "decade", "december", "decide", "decline", 
            "decorate", "decrease", "deer", "defense", "define", "defy", 
            "degree", "delay", "deliver", "demand", "demise", "denial", 
            "dentist", "deny", "depart", "depend", "deposit", "depth", 
            "deputy", "derive", "describe", "desert", "design", "desk", 
            "despair", "destroy", "detail", "detect", "develop", "device", 
            "devote", "diagram", "dial", "diamond", "diary", "dice", 
            "diesel", "diet", "differ", "digital", "dignity", "dilemma", 
            "dinner", "dinosaur", "direct", "dirt", "disagree", "discover", 
            "disease", "dish", "dismiss", "disorder", "display", "distance", 
            "divert", "divide", "divorce", "dizzy", "doctor", "document", 
            "dog", "doll", "dolphin", "domain", "donate", "donkey", 
            "donor", "door", "dose", "double", "dove", "draft", 
            "dragon", "drama", "drastic", "draw", "dream", "dress", 
            "drift", "drill", "drink", "drip", "drive", "drop", 
            "drum", "dry", "duck", "dumb", "dune", "during", 
            "dust", "dutch", "duty", "dwarf", "dynamic", "eager", 
            "eagle", "early", "earn", "earth", "easily", "east", 
            "easy", "echo", "ecology", "economy", "edge", "edit", 
            "educate", "effort", "egg", "eight", "either", "elbow", 
            "elder", "electric", "elegant", "element", "elephant", "elevator", 
            "elite", "else", "embark", "embody", "embrace", "emerge", 
            "emotion", "employ", "empower", "empty", "enable", "enact", 
            "end", "endless", "endorse", "enemy", "energy", "enforce", 
            "engage", "engine", "enhance", "enjoy", "enlist", "enough", 
            "enrich", "enroll", "ensure", "enter", "entire", "entry", 
            "envelope", "episode", "equal", "equip", "era", "erase", 
            "erode", "erosion", "error", "erupt", "escape", "essay", 
            "essence", "estate", "eternal", "ethics", "evidence", "evil", 
            "evoke", "evolve", "exact", "example", "excess", "exchange", 
            "excite", "exclude", "excuse", "execute", "exercise", "exhaust", 
            "exhibit", "exile", "exist", "exit", "exotic", "expand", 
            "expect", "expire", "explain", "expose", "express", "extend", 
            "extra", "eye", "eyebrow", "fabric", "face", "faculty", 
            "fade", "faint", "faith", "fall", "false", "fame", 
            "family", "famous", "fan", "fancy", "fantasy", "farm", 
            "fashion", "fat", "fatal", "father", "fatigue", "fault", 
            "favorite", "feature", "february", "federal", "fee", "feed", 
            "feel", "female", "fence", "festival", "fetch", "fever", 
            "few", "fiber", "fiction", "field", "figure", "file", 
            "film", "filter", "final", "find", "fine", "finger", 
            "finish", "fire", "firm", "first", "fiscal", "fish", 
            "fit", "fitness", "fix", "flag", "flame", "flash", 
            "flat", "flavor", "flee", "flight", "flip", "float", 
            "flock", "floor", "flower", "fluid", "flush", "fly", 
            "foam", "focus", "fog", "foil", "fold", "follow", 
            "food", "foot", "force", "forest", "forget", "fork", 
            "fortune", "forum", "forward", "fossil", "foster", "found", 
            "fox", "fragile", "frame", "frequent", "fresh", "friend", 
            "fringe", "frog", "front", "frost", "frown", "frozen", 
            "fruit", "fuel", "fun", "funny", "furnace", "fury", 
            "future", "gadget", "gain", "galaxy", "gallery", "game", 
            "gap", "garage", "garbage", "garden", "garlic", "garment", 
            "gas", "gasp", "gate", "gather", "gauge", "gaze", 
            "general", "genius", "genre", "gentle", "genuine", "gesture", 
            "ghost", "giant", "gift", "giggle", "ginger", "giraffe", 
            "girl", "give", "glad", "glance", "glare", "glass", 
            "glide", "glimpse", "globe", "gloom", "glory", "glove", 
            "glow", "glue", "goat", "goddess", "gold", "good", 
            "goose", "gorilla", "gospel", "gossip", "govern", "gown", 
            "grab", "grace", "grain", "grant", "grape", "grass", 
            "gravity", "great", "green", "grid", "grief", "grit", 
            "grocery", "group", "grow", "grunt", "guard", "guess", 
            "guide", "guilt", "guitar", "gun", "gym", "habit", 
            "hair", "half", "hammer", "hamster", "hand", "happy", 
            "harbor", "hard", "harsh", "harvest", "hat", "have", 
            "hawk", "hazard", "head", "health", "heart", "heavy", 
            "hedgehog", "height", "hello", "helmet", "help", "hen", 
            "hero", "hidden", "high", "hill", "hint", "hip", 
            "hire", "history", "hobby", "hockey", "hold", "hole", 
            "holiday", "hollow", "home", "honey", "hood", "hope", 
            "horn", "horror", "horse", "hospital", "host", "hotel", 
            "hour", "hover", "hub", "huge", "human", "humble", 
            "humor", "hundred", "hungry", "hunt", "hurdle", "hurry", 
            "hurt", "husband", "hybrid", "ice", "icon", "idea", 
            "identify", "idle", "ignore", "ill", "illegal", "illness", 
            "image", "imitate", "immense", "immune", "impact", "impose", 
            "improve", "impulse", "inch", "include", "income", "increase", 
            "index", "indicate", "indoor", "industry", "infant", "inflict", 
            "inform", "inhale", "inherit", "initial", "inject", "injury", 
            "inmate", "inner", "innocent", "input", "inquiry", "insane", 
            "insect", "inside", "inspire", "install", "intact", "interest", 
            "into", "invest", "invite", "involve", "iron", "island", 
            "isolate", "issue", "item", "ivory", "jacket", "jaguar", 
            "jar", "jazz", "jealous", "jeans", "jelly", "jewel", 
            "job", "join", "joke", "journey", "joy", "judge", 
            "juice", "jump", "jungle", "junior", "junk", "just", 
            "kangaroo", "keen", "keep", "ketchup", "key", "kick", 
            "kid", "kidney", "kind", "kingdom", "kiss", "kit", 
            "kitchen", "kite", "kitten", "kiwi", "knee", "knife", 
            "knock", "know", "lab", "label", "labor", "ladder", 
            "lady", "lake", "lamp", "language", "laptop", "large", 
            "later", "latin", "laugh", "laundry", "lava", "law", 
            "lawn", "lawsuit", "layer", "lazy", "leader", "leaf", 
            "learn", "leave", "lecture", "left", "leg", "legal", 
            "legend", "leisure", "lemon", "lend", "length", "lens", 
            "leopard", "lesson", "letter", "level", "liar", "liberty", 
            "library", "license", "life", "lift", "light", "like", 
            "limb", "limit", "link", "lion", "liquid", "list", 
            "little", "live", "lizard", "load", "loan", "lobster", 
            "local", "lock", "logic", "lonely", "long", "loop", 
            "lottery", "loud", "lounge", "love", "loyal", "lucky", 
            "luggage", "lumber", "lunar", "lunch", "luxury", "lyrics", 
            "machine", "mad", "magic", "magnet", "maid", "mail", 
            "main", "major", "make", "mammal", "man", "manage", 
            "mandate", "mango", "mansion", "manual", "maple", "marble", 
            "march", "margin", "marine", "market", "marriage", "mask", 
            "mass", "master", "match", "material", "math", "matrix", 
            "matter", "maximum", "maze", "meadow", "mean", "measure", 
            "meat", "mechanic", "medal", "media", "melody", "melt", 
            "member", "memory", "mention", "menu", "mercy", "merge", 
            "merit", "merry", "mesh", "message", "metal", "method", 
            "middle", "midnight", "milk", "million", "mimic", "mind", 
            "minimum", "minor", "minute", "miracle", "mirror", "misery", 
            "miss", "mistake", "mix", "mixed", "mixture", "mobile", 
            "model", "modify", "mom", "moment", "monitor", "monkey", 
            "monster", "month", "moon", "moral", "more", "morning", 
            "mosquito", "mother", "motion", "motor", "mountain", "mouse", 
            "move", "movie", "much", "muffin", "mule", "multiply", 
            "muscle", "museum", "mushroom", "music", "must", "mutual", 
            "myself", "mystery", "myth", "naive", "name", "napkin", 
            "narrow", "nasty", "nation", "nature", "near", "neck", 
            "need", "negative", "neglect", "neither", "nephew", "nerve", 
            "nest", "net", "network", "neutral", "never", "news", 
            "next", "nice", "night", "noble", "noise", "nominee", 
            "noodle", "normal", "north", "nose", "notable", "note", 
            "nothing", "notice", "novel", "now", "nuclear", "number", 
            "nurse", "nut", "oak", "obey", "object", "oblige", 
            "obscure", "observe", "obtain", "obvious", "occur", "ocean", 
            "october", "odor", "off", "offer", "office", "often", 
            "oil", "okay", "old", "olive", "olympic", "omit", 
            "once", "one", "onion", "online", "only", "open", 
            "opera", "opinion", "oppose", "option", "orange", "orbit", 
            "orchard", "order", "ordinary", "organ", "orient", "original", 
            "orphan", "ostrich", "other", "outdoor", "outer", "output", 
            "outside", "oval", "oven", "over", "own", "owner", 
            "oxygen", "oyster", "ozone", "pact", "paddle", "page", 
            "pair", "palace", "palm", "panda", "panel", "panic", 
            "panther", "paper", "parade", "parent", "park", "parrot", 
            "party", "pass", "patch", "path", "patient", "patrol", 
            "pattern", "pause", "pave", "payment", "peace", "peanut", 
            "pear", "peasant", "pelican", "pen", "penalty", "pencil", 
            "people", "pepper", "perfect", "permit", "person", "pet", 
            "phone", "photo", "phrase", "physical", "piano", "picnic", 
            "picture", "piece", "pig", "pigeon", "pill", "pilot", 
            "pink", "pioneer", "pipe", "pistol", "pitch", "pizza", 
            "place", "planet", "plastic", "plate", "play", "please", 
            "pledge", "pluck", "plug", "plunge", "poem", "poet", 
            "point", "polar", "pole", "police", "pond", "pony", 
            "pool", "popular", "portion", "position", "possible", "post", 
            "potato", "pottery", "poverty", "powder", "power", "practice", 
            "praise", "predict", "prefer", "prepare", "present", "pretty", 
            "prevent", "price", "pride", "primary", "print", "priority", 
            "prison", "private", "prize", "problem", "process", "produce", 
            "profit", "program", "project", "promote", "proof", "property", 
            "prosper", "protect", "proud", "provide", "public", "pudding", 
            "pull", "pulp", "pulse", "pumpkin", "punch", "pupil", 
            "puppy", "purchase", "purity", "purpose", "purse", "push", 
            "put", "puzzle", "pyramid", "quality", "quantum", "quarter", 
            "question", "quick", "quit", "quiz", "quote", "rabbit", 
            "raccoon", "race", "rack", "radar", "radio", "rail", 
            "rain", "raise", "rally", "ramp", "ranch", "random", 
            "range", "rapid", "rare", "rate", "rather", "raven", 
            "raw", "razor", "ready", "real", "reason", "rebel", 
            "rebuild", "recall", "receive", "recipe", "record", "recycle", 
            "reduce", "reflect", "reform", "refuse", "region", "regret", 
            "regular", "reject", "relax", "release", "relief", "rely", 
            "remain", "remember", "remind", "remove", "render", "renew", 
            "rent", "reopen", "repair", "repeat", "replace", "report", 
            "require", "rescue", "resemble", "resist", "resource", "response", 
            "result", "retire", "retreat", "return", "reunion", "reveal", 
            "review", "reward", "rhythm", "rib", "ribbon", "rice", 
            "rich", "ride", "ridge", "rifle", "right", "rigid", 
            "ring", "riot", "ripple", "risk", "ritual", "rival", 
            "river", "road", "roast", "robot", "robust", "rocket", 
            "romance", "roof", "rookie", "room", "rose", "rotate", 
            "rough", "round", "route", "royal", "rubber", "rude", 
            "rug", "rule", "run", "runway", "rural", "sad", 
            "saddle", "sadness", "safe", "sail", "salad", "salmon", 
            "salon", "salt", "salute", "same", "sample", "sand", 
            "satisfy", "satoshi", "sauce", "sausage", "save", "say", 
            "scale", "scan", "scare", "scatter", "scene", "scheme", 
            "school", "science", "scissors", "scorpion", "scout", "scrap", 
            "screen", "script", "scrub", "sea", "search", "season", 
            "seat", "second", "secret", "section", "security", "seed", 
            "seek", "segment", "select", "sell", "seminar", "senior", 
            "sense", "sentence", "series", "service", "session", "settle", 
            "setup", "seven", "shadow", "shaft", "shallow", "share", 
            "shed", "shell", "sheriff", "shield", "shift", "shine", 
            "ship", "shiver", "shock", "shoe", "shoot", "shop", 
            "short", "shoulder", "shove", "shrimp", "shrug", "shuffle", 
            "shy", "sibling", "sick", "side", "siege", "sight", 
            "sign", "silent", "silk", "silly", "silver", "similar", 
            "simple", "since", "sing", "siren", "sister", "situate", 
            "six", "size", "skate", "sketch", "ski", "skill", 
            "skin", "skirt", "skull", "slab", "slam", "sleep", 
            "slender", "slice", "slide", "slight", "slim", "slogan", 
            "slot", "slow", "slush", "small", "smart", "smile", 
            "smoke", "smooth", "snack", "snake", "snap", "sniff", 
            "snow", "soap", "soccer", "social", "sock", "soda", 
            "soft", "solar", "soldier", "solid", "solution", "solve", 
            "someone", "song", "soon", "sorry", "sort", "soul", 
            "sound", "soup", "source", "south", "space", "spare", 
            "spatial", "spawn", "speak", "special", "speed", "spell", 
            "spend", "sphere", "spice", "spider", "spike", "spin", 
            "spirit", "split", "spoil", "sponsor", "spoon", "sport", 
            "spot", "spray", "spread", "spring", "spy", "square", 
            "squeeze", "squirrel", "stable", "stadium", "staff", "stage", 
            "stairs", "stamp", "stand", "start", "state", "stay", 
            "steak", "steel", "stem", "step", "stereo", "stick", 
            "still", "sting", "stock", "stomach", "stone", "stool", 
            "story", "stove", "strategy", "street", "strike", "strong", 
            "struggle", "student", "stuff", "stumble", "style", "subject", 
            "submit", "subway", "success", "such", "sudden", "suffer", 
            "sugar", "suggest", "suit", "summer", "sun", "sunny", 
            "sunset", "super", "supply", "supreme", "sure", "surface", 
            "surge", "surprise", "surround", "survey", "suspect", "sustain", 
            "swallow", "swamp", "swap", "swarm", "swear", "sweet", 
            "swift", "swim", "swing", "switch", "sword", "symbol", 
            "symptom", "syrup", "system", "table", "tackle", "tag", 
            "tail", "talent", "talk", "tank", "tape", "target", 
            "task", "taste", "tattoo", "taxi", "teach", "team", 
            "tell", "ten", "tenant", "tennis", "tent", "term", 
            "test", "text", "thank", "that", "theme", "then", 
            "theory", "there", "they", "thing", "this", "thought", 
            "three", "thrive", "throw", "thumb", "thunder", "ticket", 
            "tide", "tiger", "tilt", "timber", "time", "tiny", 
            "tip", "tired", "tissue", "title", "toast", "tobacco", 
            "today", "toddler", "toe", "together", "toilet", "token", 
            "tomato", "tomorrow", "tone", "tongue", "tonight", "tool", 
            "tooth", "top", "topic", "topple", "torch", "tornado", 
            "tortoise", "toss", "total", "tourist", "toward", "tower", 
            "town", "toy", "track", "trade", "traffic", "tragic", 
            "train", "transfer", "trap", "trash", "travel", "tray", 
            "treat", "tree", "trend", "trial", "tribe", "trick", 
            "trigger", "trim", "trip", "trophy", "trouble", "truck", 
            "true", "truly", "trumpet", "trust", "truth", "try", 
            "tube", "tuition", "tumble", "tuna", "tunnel", "turkey", 
            "turn", "turtle", "twelve", "twenty", "twice", "twin", 
            "twist", "two", "type", "typical", "ugly", "umbrella", 
            "unable", "unaware", "uncle", "uncover", "under", "undo", 
            "unfair", "unfold", "unhappy", "uniform", "unique", "unit", 
            "universe", "unknown", "unlock", "until", "unusual", "unveil", 
            "update", "upgrade", "uphold", "upon", "upper", "upset", 
            "urban", "urge", "usage", "use", "used", "useful", 
            "useless", "usual", "utility", "vacant", "vacuum", "vague", 
            "valid", "valley", "valve", "van", "vanish", "vapor", 
            "various", "vast", "vault", "vehicle", "velvet", "vendor", 
            "venture", "venue", "verb", "verify", "version", "very", 
            "vessel", "veteran", "viable", "vibrant", "vicious", "victory", 
            "video", "view", "village", "vintage", "violin", "virtual", 
            "virus", "visa", "visit", "visual", "vital", "vivid", 
            "vocal", "voice", "void", "volcano", "volume", "vote", 
            "voyage", "wage", "wagon", "wait", "walk", "wall", 
            "walnut", "want", "warfare", "warm", "warrior", "wash", 
            "wasp", "waste", "water", "wave", "way", "wealth", 
            "weapon", "wear", "weasel", "weather", "web", "wedding", 
            "weekend", "weird", "welcome", "west", "wet", "whale", 
            "what", "wheat", "wheel", "when", "where", "whip", 
            "whisper", "wide", "width", "wild", "will", "win", 
            "window", "wine", "wing", "wink", "winner", "winter", 
            "wire", "wisdom", "wise", "wish", "witness", "wolf", 
            "woman", "wonder", "wood", "wool", "word", "work", 
            "world", "worry", "worth", "wrap", "wreck", "wrestle", 
            "wrist", "write", "wrong", "yard", "year", "yellow", 
            "you", "young", "youth", "zebra", "zero", "zone", 
            "zoo"
        ];
        
        // Сохраненные кошельки
        let wallets = [];
        let currentWallet = null;
        let currentSeedPhrase = null;
        let tonPrice = 2.40;
        let tonPriceChange = 1.64;
        
        // DOM Elements
        const screens = document.querySelectorAll('.screen');
        const navBar = document.getElementById('navBar');
        const seedGrid = document.getElementById('seedGrid');
        const restoreGrid = document.getElementById('restoreGrid');
        const strengthMeter = document.getElementById('strengthMeter');
        const transactionList = document.getElementById('transactionList');
        const walletBalance = document.getElementById('walletBalance');
        const walletAddress = document.getElementById('walletAddress');
        const fullAddress = document.getElementById('fullAddress');
        const themeSelect = document.getElementById('themeSelect');
        const tonBalance = document.getElementById('tonBalance');
        const tonValue = document.getElementById('tonValue');
        const tonChange = document.getElementById('tonChange');
        
        // Инициализация
        document.addEventListener('DOMContentLoaded', function() {
            // Загрузка кошельков из localStorage
            const storedWallets = localStorage.getItem('tonGuardWallets');
            if (storedWallets) {
                wallets = JSON.parse(storedWallets);
            }
            
            // Если есть кошельки, показываем экран авторизации
            if (wallets.length > 0) {
                showScreen('authScreen');
            } else {
                showScreen('authScreen');
            }
            
            // Инициализация экранов
            initSeedGrid();
            initRestoreGrid();
            
            // Установка темы
            const savedTheme = localStorage.getItem('tonwarpTheme') || 'dark';
            themeSelect.value = savedTheme;
            applyTheme(savedTheme);
            
            // Загрузка курса TON
            updateTonPrice();
            
            // Event Listeners
            document.getElementById('createWalletBtn').addEventListener('click', () => {
                currentSeedPhrase = generateRandomSeedPhrase();
                showScreen('seedPhraseScreen');
                renderSeedPhrase(currentSeedPhrase);
            });
            
            document.getElementById('restoreWalletBtn').addEventListener('click', () => {
                showScreen('restoreScreen');
            });
            
            document.getElementById('continueToVerifyBtn').addEventListener('click', () => {
                showScreen('verifySeedScreen');
            });
            
            document.getElementById('verifySeedBtn').addEventListener('click', verifySeedPhrase);
            document.getElementById('createPasswordBtn').addEventListener('click', createWallet);
            document.getElementById('continueRestoreBtn').addEventListener('click', restoreWallet);
            document.getElementById('walletPassword').addEventListener('input', updatePasswordStrength);
            themeSelect.addEventListener('change', saveTheme);
        });
        
        // Генерация случайной сид-фразы из 24 слов
        function generateRandomSeedPhrase() {
            const seed = [];
            for (let i = 0; i < 24; i++) {
                const randomIndex = Math.floor(Math.random() * bip39Words.length);
                seed.push(bip39Words[randomIndex]);
            }
            return seed;
        }
        
        // Инициализация сетки сид-фразы
        function initSeedGrid() {
            seedGrid.innerHTML = '';
        }
        
        // Инициализация сетки восстановления
        function initRestoreGrid() {
            restoreGrid.innerHTML = '';
            for (let i = 1; i <= 24; i++) {
                const inputGroup = document.createElement('div');
                inputGroup.className = 'restore-input';
                
                const label = document.createElement('label');
                label.textContent = `${i}:`;
                
                const input = document.createElement('input');
                input.type = 'text';
                input.id = `restoreWord${i}`;
                input.autocomplete = 'off';
                
                inputGroup.appendChild(label);
                inputGroup.appendChild(input);
                restoreGrid.appendChild(inputGroup);
            }
        }
        
        // Отображение сид-фразы
        function renderSeedPhrase(seedPhrase) {
            seedGrid.innerHTML = '';
            seedPhrase.forEach((word, index) => {
                const seedElement = document.createElement('div');
                seedElement.className = 'seed-word';
                seedElement.innerHTML = `<span class="seed-number">${index + 1}.</span> ${word}`;
                seedGrid.appendChild(seedElement);
            });
        }
        
        // Проверка сид-фразы
        function verifySeedPhrase() {
            const word7 = document.getElementById('word7').value.toLowerCase();
            const word14 = document.getElementById('word14').value.toLowerCase();
            const word19 = document.getElementById('word19').value.toLowerCase();
            
            if (!word7 || !word14 || !word19) {
                alert('Пожалуйста, заполните все поля');
                return;
            }
            
            if (word7 !== currentSeedPhrase[6] || 
                word14 !== currentSeedPhrase[13] || 
                word19 !== currentSeedPhrase[18]) {
                alert('Одно или несколько слов не совпадают. Пожалуйста, проверьте сид-фразу и попробуйте снова.');
                return;
            }
            
            showScreen('passwordScreen');
        }
        
        // Создание кошелька
        async function createWallet() {
            const password = document.getElementById('walletPassword').value;
            const confirmPassword = document.getElementById('confirmWalletPassword').value;
            
            if (!password || !confirmPassword) {
                alert('Пожалуйста, заполните все поля');
                return;
            }
            
            if (password !== confirmPassword) {
                alert('Пароли не совпадают');
                return;
            }
            
            if (password.length < 8) {
                alert('Пароль должен содержать не менее 8 символов');
                return;
            }
            
            // Генерируем ключи из сид-фразы
            const keyPair = generateKeysFromSeed(currentSeedPhrase);
            const address = generateTONAddress(keyPair.publicKey);
            
            // Получаем начальный баланс
            const initialBalance = await getTonBalance(address);
            
            // Создаем новый кошелек
            const newWallet = {
                id: Date.now(),
                name: "TonWarp Wallet",
                seedPhrase: currentSeedPhrase,
                password: CryptoJS.SHA256(password).toString(),
                keyPair: keyPair,
                address: address,
                createdAt: new Date(),
                assets: [
                    { 
                        name: "Toncoin", 
                        symbol: "TON", 
                        balance: initialBalance,
                        value: 0 
                    }
                ],
                transactions: []
            };
            
            // Добавляем кошелек и сохраняем
            wallets.push(newWallet);
            localStorage.setItem('tonGuardWallets', JSON.stringify(wallets));
            
            // Устанавливаем текущий кошелек
            currentWallet = newWallet;
            
            // Переходим на главный экран
            showScreen('mainScreen');
            showNavBar(true);
            updateWalletUI();
        }
        
        // Восстановление кошелька
        async function restoreWallet() {
            const seedPhrase = [];
            for (let i = 1; i <= 24; i++) {
                const word = document.getElementById(`restoreWord${i}`).value.trim().toLowerCase();
                if (!word) {
                    alert(`Пожалуйста, заполните слово #${i}`);
                    return;
                }
                seedPhrase.push(word);
            }
            
            currentSeedPhrase = seedPhrase;
            
            // Генерируем ключи из сид-фразы
            const keyPair = generateKeysFromSeed(currentSeedPhrase);
            const address = generateTONAddress(keyPair.publicKey);
            
            // Получаем баланс
            const balance = await getTonBalance(address);
            
            // Создаем временный кошелек для восстановления
            currentWallet = {
                id: Date.now(),
                name: "Restored Wallet",
                seedPhrase: currentSeedPhrase,
                keyPair: keyPair,
                address: address,
                assets: [
                    { 
                        name: "Toncoin", 
                        symbol: "TON", 
                        balance: balance,
                        value: 0 
                    }
                ],
                transactions: []
            };
            
            showScreen('passwordScreen');
        }
        
        // Функция для генерации ключей из сид-фразы
        function generateKeysFromSeed(seedPhrase) {
            const seed = TonCrypto.mnemonic.toSeed(seedPhrase.join(' '));
            const keyPair = TonCrypto.nacl.sign.keyPair.fromSeed(seed.subarray(0, 32));
            return keyPair;
        }
        
        // Генерация TON адреса из публичного ключа
        function generateTONAddress(publicKey) {
            // Создаем адрес в формате raw (workchain 0)
            const addr = new TonCrypto.Address('0:' + TonCrypto.utils.bytesToHex(publicKey));
            return addr.toString(true, true, TESTNET);
        }
        
        // Получение баланса через Toncenter API
        async function getTonBalance(address) {
            try {
                const response = await fetch(`${TONCENTER_URL}/getAddressBalance?address=${address}`, {
                    headers: { 'X-API-Key': TONCENTER_API_KEY }
                });
                
                const data = await response.json();
                if (data && data.result) {
                    // Баланс возвращается в нанотонах
                    return parseFloat(data.result) / 1000000000; // Конвертируем в TON
                }
                return 0;
            } catch (error) {
                console.error('Ошибка получения баланса:', error);
                return 0;
            }
        }
        
        // Получение истории транзакций
        async function getTransactions(address) {
            try {
                const response = await fetch(`${TONCENTER_URL}/getTransactions?address=${address}&limit=50`, {
                    headers: { 'X-API-Key': TONCENTER_API_KEY }
                });
                
                const data = await response.json();
                if (data && data.result) {
                    return data.result.map(tx => {
                        const isIncoming = tx.in_msg.source !== '';
                        const amount = parseFloat(tx.in_msg.value || tx.out_msgs[0]?.value || 0) / 1000000000;
                        const shortAddress = isIncoming ? 
                            `${tx.in_msg.source.substring(0, 4)}...${tx.in_msg.source.substring(tx.in_msg.source.length - 4)}` :
                            tx.out_msgs[0] ? 
                            `${tx.out_msgs[0].destination.substring(0, 4)}...${tx.out_msgs[0].destination.substring(tx.out_msgs[0].destination.length - 4)}` : 
                            'unknown';
                        
                        return {
                            id: tx.transaction_id.hash,
                            type: isIncoming ? "receive" : "send",
                            title: isIncoming ? "Получение TON" : "Отправка TON",
                            date: new Date(tx.utime * 1000).toLocaleString('ru-RU', { day: '2-digit', month: 'short', hour: '2-digit', minute: '2-digit' }),
                            amount: amount.toFixed(4),
                            address: isIncoming ? tx.in_msg.source : tx.out_msgs[0]?.destination,
                            shortAddress: shortAddress
                        };
                    });
                }
                return [];
            } catch (error) {
                console.error('Ошибка получения транзакций:', error);
                return [];
            }
        }
        
        // Отправка транзакции через Toncenter API
        async function sendTonTransaction(sourceKeys, destination, amount) {
            try {
                // Конвертируем сумму в нанотоны
                const amountInNanoton = Math.round(amount * 1000000000);
                
                // Создаем тело сообщения
                const msg = {
                    address: destination,
                    amount: amountInNanoton.toString()
                };
                
                // Создаем и подписываем транзакцию
                const body = {
                    source: currentWallet.address,
                    destination: destination,
                    amount: amountInNanoton,
                    message: "TonWarp transaction",
                    secretKey: TonCrypto.utils.bytesToBase64(sourceKeys.secretKey)
                };
                
                const response = await fetch(`${TONCENTER_URL}/sendTransaction`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'X-API-Key': TONCENTER_API_KEY
                    },
                    body: JSON.stringify(body)
                });
                
                const result = await response.json();
                if (result.ok) {
                    return { success: true, hash: result.result.transaction_id };
                }
                return { success: false, error: result.error };
            } catch (error) {
                console.error('Ошибка отправки транзакции:', error);
                return { success: false, error: error.message };
            }
        }
        
        // Обновление индикатора силы пароля
        function updatePasswordStrength() {
            const password = document.getElementById('walletPassword').value;
            let strength = 0;
            
            if (password.length >= 8) strength += 25;
            if (password.length >= 12) strength += 25;
            if (/[A-Z]/.test(password)) strength += 25;
            if (/[0-9]/.test(password)) strength += 25;
            
            strengthMeter.style.width = `${strength}%`;
            
            if (strength < 50) {
                strengthMeter.style.background = 'var(--danger)';
            } else if (strength < 75) {
                strengthMeter.style.background = 'var(--warning)';
            } else {
                strengthMeter.style.background = 'var(--success)';
            }
        }
        
        // Получение курса TON
        async function updateTonPrice() {
            try {
                const response = await fetch('https://api.coingecko.com/api/v3/simple/price?ids=the-open-network&vs_currencies=usd&include_24hr_change=true');
                const data = await response.json();
                
                if (data && data['the-open-network']) {
                    tonPrice = data['the-open-network'].usd;
                    tonPriceChange = data['the-open-network'].usd_24h_change;
                    
                    // Обновляем UI если есть текущий кошелек
                    if (currentWallet) {
                        updateWalletUI();
                    }
                }
            } catch (error) {
                console.error('Ошибка при получении курса TON:', error);
                // Значения по умолчанию
                tonPrice = 2.40;
                tonPriceChange = 1.64;
            }
        }
        
        // Отображение транзакций
        async function renderTransactions() {
            if (!currentWallet) return;
            
            transactionList.innerHTML = '<div class="loading"><div class="loading-spinner"></div><p>Загрузка транзакций...</p></div>';
            
            try {
                const transactions = await getTransactions(currentWallet.address);
                
                if (transactions.length === 0) {
                    transactionList.innerHTML = `
                        <div class="no-transactions">
                            <p><i class="fas fa-wallet" style="font-size: 24px; margin-bottom: 10px;"></i></p>
                            <p>Транзакций не найдено</p>
                            <p>Совершите свою первую транзакцию!</p>
                        </div>
                    `;
                    return;
                }
                
                transactionList.innerHTML = '';
                
                transactions.forEach(transaction => {
                    const transactionElement = document.createElement('div');
                    transactionElement.className = 'transaction-item';
                    
                    transactionElement.innerHTML = `
                        <div class="transaction-icon">
                            <i class="fas fa-${transaction.type === 'receive' ? 'arrow-down' : 'arrow-up'}"></i>
                        </div>
                        <div class="transaction-details">
                            <div class="transaction-title">
                                ${transaction.title}
                            </div>
                            <div class="transaction-address">${transaction.shortAddress} | ${transaction.date}</div>
                        </div>
                        <div class="transaction-amount ${transaction.type}">
                            ${transaction.type === 'receive' ? '+' : '-'}${transaction.amount} <span class="ton-icon">T</span>
                        </div>
                    `;
                    
                    transactionList.appendChild(transactionElement);
                });
            } catch (error) {
                transactionList.innerHTML = `
                    <div class="no-transactions">
                        <p><i class="fas fa-exclamation-triangle" style="font-size: 24px; margin-bottom: 10px;"></i></p>
                        <p>Ошибка загрузки транзакций</p>
                        <p>Попробуйте позже</p>
                    </div>
                `;
            }
        }
        
        // Применение темы
        function applyTheme(theme) {
            if (theme === 'dark') {
                document.body.classList.add('dark-mode');
            } else {
                document.body.classList.remove('dark-mode');
            }
        }
        
        // Сохранение темы
        function saveTheme() {
            const theme = themeSelect.value;
            localStorage.setItem('tonwarpTheme', theme);
            applyTheme(theme);
        }
        
        // Показать экран
        function showScreen(screenId) {
            screens.forEach(screen => {
                screen.classList.remove('active');
            });
            document.getElementById(screenId).classList.add('active');
            
            // Обновление навигации
            if (screenId === 'mainScreen' || screenId === 'settingsScreen') {
                document.querySelectorAll('.nav-item').forEach(item => {
                    item.classList.remove('active');
                });
                
                if (screenId === 'mainScreen') {
                    document.querySelector('.nav-item:nth-child(1)').classList.add('active');
                } else if (screenId === 'settingsScreen') {
                    document.querySelector('.nav-item:nth-child(2)').classList.add('active');
                }
            }
            
            // Обновляем UI при открытии главного экрана
            if (screenId === 'mainScreen' && currentWallet) {
                updateWalletUI();
            }
        }
        
        // Показать/скрыть навигационную панель
        function showNavBar(show) {
            navBar.style.display = show ? 'flex' : 'none';
        }
        
        // Показать модальное окно
        function showModal(modalId) {
            document.getElementById(modalId).style.display = 'flex';
        }
        
        // Закрыть модальное окно
        function closeModal() {
            document.querySelectorAll('.modal').forEach(modal => {
                modal.style.display = 'none';
            });
        }
        
        // Скопировать адрес
        function copyAddress() {
            navigator.clipboard.writeText(fullAddress.textContent);
            alert('Адрес скопирован в буфер обмена!');
        }
        
        // Показать полный адрес
        function showAddressModal() {
            if (!currentWallet) return;
            fullAddress.textContent = currentWallet.address;
            showModal('receiveModal');
        }
        
        // Отправить транзакцию
        async function sendTransaction() {
            const recipient = document.getElementById('recipient').value;
            const amount = parseFloat(document.getElementById('amount').value);
            
            if (!recipient || !amount) {
                alert('Пожалуйста, заполните все поля');
                return;
            }
            
            if (amount <= 0) {
                alert('Сумма должна быть больше 0');
                return;
            }
            
            if (!currentWallet || currentWallet.assets[0].balance < amount) {
                alert('Недостаточно средств');
                return;
            }
            
            // Отправляем через API
            const result = await sendTonTransaction(
                currentWallet.keyPair,
                recipient,
                amount
            );
            
            if (result.success) {
                alert(`Успешно отправлено ${amount} TON! TX Hash: ${result.hash}`);
                
                // Обновляем UI
                setTimeout(updateWalletUI, 5000); // Даем время на подтверждение транзакции
            } else {
                alert(`Ошибка отправки: ${result.error}`);
            }
            
            closeModal();
        }
        
        // Показать сид-фразу
        function showSeedPhrase() {
            if (!currentWallet) return;
            alert(`Ваша сид-фраза:\n\n${currentWallet.seedPhrase.join(' ')}\n\nСохраните её в безопасном месте!`);
            closeModal();
        }
        
        // Выход из системы
        function logout() {
            currentWallet = null;
            showScreen('authScreen');
            showNavBar(false);
        }
        
        // Обновление UI кошелька
        async function updateWalletUI() {
            if (!currentWallet) return;
            
            // Обновляем баланс через API
            currentWallet.assets[0].balance = await getTonBalance(currentWallet.address);
            
            // Рассчитываем баланс в долларах
            const usdBalance = (currentWallet.assets[0].balance * tonPrice).toFixed(2);
            
            walletBalance.textContent = `$${usdBalance}`;
            walletAddress.innerHTML = `${currentWallet.address.substring(0, 6)}...${currentWallet.address.substring(currentWallet.address.length - 4)} <i class="fas fa-copy"></i>`;
            fullAddress.textContent = currentWallet.address;
            
            // Обновляем активы
            tonBalance.textContent = `${currentWallet.assets[0].balance.toFixed(4)} TON`;
            tonValue.textContent = `$${(currentWallet.assets[0].balance * tonPrice).toFixed(2)}`;
            
            // Форматируем изменение цены
            const changeSign = tonPriceChange >= 0 ? '+' : '';
            tonChange.textContent = `$${tonPrice.toFixed(2)} ${changeSign}${tonPriceChange.toFixed(2)}%`;
            
            // Обновляем транзакции
            renderTransactions();
        }
        
        // Сохранение кошельков
        function saveWallets() {
            localStorage.setItem('tonGuardWallets', JSON.stringify(wallets));
        }
    </script>
</body>
</html>
